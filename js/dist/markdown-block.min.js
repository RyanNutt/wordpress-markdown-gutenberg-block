/* (c) 2020 Ryan Nutt - https://www.nutt.net */

!function(){var e=wp.i18n.__,o=wp.element.createElement;(0,wp.blocks.registerBlockType)("aelora/markdown-block",{title:e("Markdown","markdown-gutenberg-block"),icon:"media-code",category:"common",description:e("Edit posts in markdown with the SimpleMDE editor","markdown-gutenberg-block"),attributes:{markdown:{default:""},html:{default:""}},supports:{html:!1,reusable:!0},edit:function(a){console.info("setting up block contents");console.info(a);var e=wp.element.createElement,t=e("textarea",{style:{display:"none"}},a.attributes.markdown),n=e("div",{"data-markdown":"editor"},t),r=e("div",{"data-markdown-preview":a.clientId,"data-markdown":"preview"},"");return e("div",{},n,r,o("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",onLoad:function(e){var t=new SimpleMDE({element:jQuery('div[data-block="'+a.clientId+'"] textarea')[0],toolbar:!1,spellChecker:!1});jQuery('div[data-markdown-preview="'+a.clientId+'"]').html(a.attributes.html);t.codemirror.on("change",function(){var e=t.options.previewRender(t.value());a.setAttributes({markdown:t.value(),html:e});jQuery('div[data-markdown-preview="'+a.clientId+'"]').html(e)})}}))}})}();
/* (c) 2020 Ryan Nutt - https://www.nutt.net */

!function(){var e=wp.i18n.__,n=wp.element.createElement,t=wp.blocks.registerBlockType,r=wp.element.createElement("svg",{width:16,height:16},wp.element.createElement("path",{d:"M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z"}));t("aelora/markdown-block",{title:e("Markdown","markdown-gutenberg-block"),icon:r,category:"common",description:e("Edit posts in markdown with the SimpleMDE editor","markdown-gutenberg-block"),attributes:{markdown:{default:""},html:{default:""}},supports:{html:!1,reusable:!0},edit:function(r){var e=wp.element.createElement,t=e("textarea",{style:{display:"none"}},r.attributes.markdown),a=e("div",{"data-markdown":"editor"},t),i=e("div",{"data-markdown-preview":r.clientId,"data-markdown":"preview"},"");return e("div",{},a,i,n("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",onLoad:function(e){var t=new SimpleMDE({element:jQuery('div[data-block="'+r.clientId+'"] textarea')[0],toolbar:!1,spellChecker:!1,status:!1});jQuery('div[data-markdown-preview="'+r.clientId+'"]').html(r.attributes.html);t.codemirror.on("change",function(){var e=t.options.previewRender(t.value());r.setAttributes({markdown:t.value(),html:e});jQuery('div[data-markdown-preview="'+r.clientId+'"]').html(e)});new MutationObserver(function(e){jQuery("div#block-"+r.clientId).hasClass("is-selected")&&t.codemirror.refresh()}).observe(jQuery("div#block-"+r.clientId)[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["class"]})}}))}})}();